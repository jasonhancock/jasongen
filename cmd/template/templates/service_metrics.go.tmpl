// Code generated by {{.GeneratorInfo.Name }}. DO NOT EDIT.
// {{ .GeneratorInfo.Name }} {{ .GeneratorInfo.Version }}

package {{ .PackageName }}

import (
    "context"

    "github.com/prometheus/client_golang/prometheus"
{{- if .PkgModels }}
	models "{{ .PkgModels }}"
{{ end }}
)

var _ SVC = (*MetricsService)(nil) // Verify that *MetricsService implements SVC.

type MetricsService struct {
    svc    SVC
    errCounter *prometheus.CounterVec
}

func NewMetricsService(svc SVC, errCounter *prometheus.CounterVec) *MetricsService {
	return &MetricsService{
		svc: svc,
        errCounter: errCounter,
	}
}

{{ range .Handlers }}
// {{ .ExportedName }} {{ .Comment }}
func (s *MetricsService) {{ .ExportedName }}({{ .TypeList }}) {{ if .IsFileDownload }}(io.ReadCloser, string, string, {{ else }}{{ if .ResponseType }}({{ models .ResponseType }}, {{end}}{{end}}error{{ if .ResponseType }}){{end}} {
{{ if .IsFileDownload -}}
	fh, fileName, contentType, err := s.svc.{{ .ExportedName }}({{ .ValueList false }})
{{ else -}}
	{{ if .ResponseType}}resp, {{ end }}err := s.svc.{{ .ExportedName }}({{ .ValueList false }})
{{ end -}}
	if err != nil {
        s.errCounter.WithLabelValues("{{ snake .Name }}").Inc()
	}
{{ if .IsFileDownload -}}
	return fh, fileName, contentType, err
{{ else -}}
	return {{ if .ResponseType }}resp, {{ end }} err
{{ end -}}
}
{{ end }}
