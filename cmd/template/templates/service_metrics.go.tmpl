// Code generated by {{.GeneratorInfo.Name }}. DO NOT EDIT.
// {{ .GeneratorInfo.Name }} {{ .GeneratorInfo.Version }}

package {{ .PackageName }}

import (
    "context"

    "github.com/prometheus/client_golang/prometheus"
{{- if .PkgModels }}
	models "{{ .PkgModels }}"
{{ end }}
)

var _ SVC = (*MetricsService)(nil) // Verify that *MetricsService implements SVC.

type MetricsService struct {
    svc    SVC
    errCounter *prometheus.CounterVec
}

func NewMetricsService(svc SVC, errCounter *prometheus.CounterVec) *MetricsService {
	return &MetricsService{
		svc: svc,
        errCounter: errCounter,
	}
}

{{ range .Handlers }}
{{ printf "%s %s" .ExportedName .Comment | formatComment }}
func (s *MetricsService) {{ .ExportedName }}({{ .TypeList $.Language }}) {{ if .ResponseType }}({{ if .IsFileDownload }}{{ .ResponseType }}{{ else }}{{ models .ResponseType }}{{ end }}, {{end}}error{{ if .ResponseType }}){{end}} {
	{{ if .ResponseType}}resp, {{ end }}err := s.svc.{{ .ExportedName }}({{ .ValueList false }})
	if err != nil {
        s.errCounter.WithLabelValues("{{ snake .Name }}").Inc()
	}
	return {{ if .ResponseType }}resp, {{ end }} err
}
{{ end }}
