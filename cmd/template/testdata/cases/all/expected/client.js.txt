// Code generated by template.test. DO NOT EDIT.
// template.test 1.2.3

class APIClient {
  async request(path, options = {}) {
    const headers = {
      "Content-Type": "application/json",
      ...(options.headers || {}),
    };

    const response = await fetch(path, {
      ...options,
      headers,
    });

    if (!response.ok) {
      let error = `Error ${response.status}`;
      const text = await response.text();
      try {
        const data = JSON.parse(text);
        error = `Error: ${data.error.message}`;
      } catch (err) {}
      throw new Error(error);
    }

    const text = await response.text();
    try {
      return text ? JSON.parse(text) : {};
    } catch {
      return text;
    }
  }

  get(path) {
    return this.request(path, { method: "GET" });
  }

  post(path, body) {
    return this.request(path, {
      method: "POST",
      body: JSON.stringify(body),
    });
  }

  put(path, body) {
    return this.request(path, {
      method: "PUT",
      body: JSON.stringify(body),
    });
  }

  delete(path) {
    return this.request(path, { method: "DELETE" });
  }

  // metrics Returns application metrics in a format Prometheus can scrape
  metrics() {
    return this.get(`/metrics`);
  }

  // widgetCreate
  widgetCreate(body) {
    return this.post(`/v1/widgets`, body);
  }

  // widgetDelete Delete a specific widget by ID.
  widgetDelete() {
    return this.delete(`/v1/widgets/${id}`);
  }

  // widgetDownload Downloads a file.
  widgetDownload() {
    return this.get(`/v1/widgets/${id}/download`);
  }

  // widgetGet Get a specific widget by ID. This is a really, really, really long comment to test out the
  // wrapping of comments on descriptions.
  widgetGet() {
    return this.get(`/v1/widgets/${id}/${num}`);
  }

  // WidgetsList Gets a list of all widgets
  WidgetsList(query_params = {}) {
    const query = new URLSearchParams(query_params).toString();
    return this.get(`/v1/widgets?${query}`);
  }

  // widgetsListStar Gets a list of widgets
  widgetsListStar() {
    return this.get(`/v1/widgets/teststar/*`);
  }
}

const api = new APIClient();
